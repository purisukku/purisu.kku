<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>เว็บส่วนตัว — Chat Fullscreen</title>

  <!-- load widget (keep defer) -->
  <script type="module" src="https://gen.ai.kku.ac.th/widget/chat-widget.es.js" defer></script>

  <style>
    /* หน้าเว็บปกติ (จะอยู่เบื้องหลัง chat) */
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header, footer {
      padding: 1rem;
      background: rgba(0,0,0,0.6);
      color: #fff;
    }
    main {
      padding: 2rem;
      flex: 1;
      background: linear-gradient(120deg,#74ebd5,#ACB6E5);
      color: #fff;
    }

    /* ---------- Fullscreen chat container ---------- */
    /* container ครอบ widget ให้เต็มหน้าจอ */
    #chat-fullscreen {
      position: fixed;
      inset: 0;                 /* top:0; right:0; bottom:0; left:0; */
      width: 100vw;
      height: 100vh;
      z-index: 9999;            /* อยู่บนสุด */
      display: flex;
      flex-direction: column;
      background: rgba(0,0,0,0.04); /* ถ้าต้องการ background เบาๆ */
      backdrop-filter: blur(4px);    /* เบลอพื้นหลัง (optional) */
    }

    /* ให้ตัว widget ขยายเต็มพื้นที่ภายใน container */
    #chat-fullscreen > chat-widget-embed,
    /* ถ้า widget มี shadow/inner elements ให้ใช้ให้เต็มด้วย !important */
    chat-widget-embed {
      width: 100% !important;
      height: 100% !important;
      min-height: 0 !important;
      min-width: 0 !important;
      align-self: stretch;
      border: none;
      box-shadow: none !important;
      margin: 0 !important;
    }

    /* ปุ่มปิดมุมบนขวา */
    #chat-close-btn {
      position: absolute;
      right: 1rem;
      top: 0.9rem;
      z-index: 10000;
      background: rgba(0,0,0,0.6);
      color: white;
      border: none;
      border-radius: 6px;
      width: 38px;
      height: 38px;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    /* ซ่อน scrollbar ของ body เวลา chat เปิด (ป้องกันการเลื่อนพื้นหลัง) */
    body.chat-open {
      overflow: hidden;
    }

    /* ตัวเลือก: ถ้าต้องการให้ widget เริ่มซ่อน ให้ใช้ display:none เป็นค่าเริ่มต้น
       แล้วเรียก showChat() ผ่านปุ่มเปิดหน้าเว็บตามต้องการ */
  </style>
</head>
<body>

  <header>
    <h1>เว็บส่วนตัวของผม</h1>
  </header>

  <main>
    <h2>หน้าแรก</h2>
    <p>ตัวอย่างหน้าเว็บของคุณ — ตอนนี้ chat จะเปิดแบบเต็มหน้าจอ</p>
    <p>ถ้าต้องการให้มันแสดงตามปกติ (มุมล่าง) ให้เอา CSS ใน #chat-fullscreen ออกหรือผมช่วยปรับให้ได้</p>
    <!-- ปุ่มตัวอย่างสำหรับเปิด/ปิด chat (ถ้าต้องการ) -->
    <p>
      <button onclick="openChat()" style="padding:8px 12px;border-radius:6px;border:none;cursor:pointer;">
        เปิด/แสดง Chat แบบเต็มจอ
      </button>
    </p>
  </main>

  <footer>
    © 2025 เว็บส่วนตัวของผม
  </footer>

  <!-- Fullscreen chat wrapper -->
  <div id="chat-fullscreen" aria-hidden="false">
    <!-- ปุ่มปิด -->
    <button id="chat-close-btn" title="ปิด chat" onclick="closeChat()">✕</button>

    <!-- Widget element (ใส่ API key / initial-message ตามจริงของคุณ) -->
    <chat-widget-embed
      api-key="44f5952a-0791-4074-81cd-ee2053148528"
      initial-message="Welcome to our site! Ask us anything."
    ></chat-widget-embed>
  </div>

  <script>
    // เริ่มต้น: ทำให้ body มีคลาส chat-open เพื่อปิด scroll (ถ้าต้องการ)
    document.body.classList.add('chat-open');

    // ฟังก์ชันปิด/เปิด
    function closeChat() {
      const cont = document.getElementById('chat-fullscreen');
      if (!cont) return;
      cont.style.display = 'none';
      document.body.classList.remove('chat-open');
    }
    function openChat() {
      const cont = document.getElementById('chat-fullscreen');
      if (!cont) return;
      cont.style.display = 'flex';
      document.body.classList.add('chat-open');
      // ถ้า widget ต้องการ trigger ภายในให้แสดง คุณอาจต้องเรียก API ของ widget ที่ผู้ให้บริการเตรียมไว้
    }
  </script>
</body>
</html>
